diff -Nuar u-boot-2010.09/board/atmel/at91sam9260ek/partition.c u-boot-2010.09-sam9260/board/atmel/at91sam9260ek/partition.c
--- u-boot-2010.09/board/atmel/at91sam9260ek/partition.c	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/board/atmel/at91sam9260ek/partition.c	2011-04-13 17:14:21.000000000 +0800
@@ -30,11 +30,11 @@
 	{CONFIG_SYS_DATAFLASH_LOGIC_ADDR_CS1, 1}
 };
 
-/*define the area offsets*/
+/*define the area offsets, modify by guowenxue for AT91SAM8260 plat*/
 dataflash_protect_t area_list[NB_DATAFLASH_AREA] = {
-	{0x00000000, 0x000041FF, FLAG_PROTECT_SET,   0, "Bootstrap"},
-	{0x00004200, 0x000083FF, FLAG_PROTECT_CLEAR, 0, "Environment"},
-	{0x00008400, 0x00041FFF, FLAG_PROTECT_SET,   0, "U-Boot"},
-	{0x00042000, 0x00251FFF, FLAG_PROTECT_CLEAR, 0,	"Kernel"},
-	{0x00252000, 0xFFFFFFFF, FLAG_PROTECT_CLEAR, 0,	"FS"},
+	{0x00000000, 0x00003FFF, FLAG_PROTECT_SET,   0, "Bootstrap 16K"},
+	{0x00004000, 0x000083FF, FLAG_PROTECT_CLEAR, 0, "Environment 17K"},
+	{0x00008400, 0x0003FFFF, FLAG_PROTECT_SET,   0, "U-Boot 223K"},
+	{0x00040000, 0x001FFFFF, FLAG_PROTECT_CLEAR, 0,	"Kernel 1.75M"},
+	{0x00200000, 0x003FFFFF, FLAG_PROTECT_CLEAR, 0,	"Rootfs 2M"},
 };
diff -Nuar u-boot-2010.09/boards.cfg u-boot-2010.09-sam9260/boards.cfg
--- u-boot-2010.09/boards.cfg	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/boards.cfg	2011-04-13 16:55:08.000000000 +0800
@@ -235,6 +235,7 @@
 eb_cpux9k2	arm	arm920t		-		BuS		at91
 at91rm9200dk	arm	arm920t		-		atmel		at91rm9200
 at91rm9200ek	arm	arm920t		-		atmel		at91rm9200
+at91sam9260ek	arm	arm926ejs		-		atmel		at91sam9260ek
 sbc2410x	arm	arm920t		-		-		s3c24x0
 smdk2400	arm	arm920t		-		samsung		s3c24x0
 smdk2410	arm	arm920t		-		samsung		s3c24x0
diff -Nuar u-boot-2010.09/do.sh u-boot-2010.09-sam9260/do.sh
--- u-boot-2010.09/do.sh	1970-01-01 08:00:00.000000000 +0800
+++ u-boot-2010.09-sam9260/do.sh	2011-04-13 17:46:55.000000000 +0800
@@ -0,0 +1,14 @@
+#!/bin/sh
+
+PWD=`pwd`
+ARCH=sam9260
+INST_PATH=/tmp/tftp
+BIN_NAME=`basename $PWD`_$ARCH.bin
+
+if [ ! -s include/config.h ] ; then
+    make at91sam9260ek_config
+fi
+make
+set -x
+cp u-boot.bin  $BIN_NAME
+cp $BIN_NAME $INST_PATH
diff -Nuar u-boot-2010.09/drivers/mtd/dataflash.c u-boot-2010.09-sam9260/drivers/mtd/dataflash.c
--- u-boot-2010.09/drivers/mtd/dataflash.c	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/drivers/mtd/dataflash.c	2011-04-13 17:50:01.000000000 +0800
@@ -220,6 +220,7 @@
 				break;
 			}
 
+#ifdef CONFIG_DATAFLASH_DEBUG  /*Add by guowenxue*/
 			printf("Nb pages: %6d\n"
 				"Page Size: %6d\n"
 				"Size=%8d bytes\n"
@@ -243,6 +244,7 @@
 					break;
 				}
 			}
+#endif  /*CONFIG_DATAFLASH_DEBUG*/
 		}
 	}
 }
diff -Nuar u-boot-2010.09/drivers/net/macb.c u-boot-2010.09-sam9260/drivers/net/macb.c
--- u-boot-2010.09/drivers/net/macb.c	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/drivers/net/macb.c	2011-04-13 17:35:02.000000000 +0800
@@ -330,7 +330,7 @@
 
 	adv = ADVERTISE_CSMA | ADVERTISE_ALL;
 	macb_mdio_write(macb, MII_ADVERTISE, adv);
-	printf("%s: Starting autonegotiation...\n", netdev->name);
+//	printf("%s: Starting autonegotiation...\n", netdev->name);  /*Comment by guowenxue*/
 	macb_mdio_write(macb, MII_BMCR, (BMCR_ANENABLE
 					 | BMCR_ANRESTART));
 
@@ -341,11 +341,13 @@
 		udelay(100);
 	}
 
+#if 0 /*Comment by guowenxue*/
 	if (status & BMSR_ANEGCOMPLETE)
 		printf("%s: Autonegotiation complete\n", netdev->name);
 	else
 		printf("%s: Autonegotiation timed out (status=0x%04x)\n",
 		       netdev->name, status);
+#endif
 }
 
 #ifdef CONFIG_MACB_SEARCH_PHY
@@ -555,7 +557,7 @@
 	macb->regs = regs;
 	macb->phy_addr = phy_addr;
 
-	sprintf(netdev->name, "macb%d", id);
+	sprintf(netdev->name, "DM9161"); /*Change macb0 to DM9161 by guowenxue*/
 	netdev->init = macb_init;
 	netdev->halt = macb_halt;
 	netdev->send = macb_send;
diff -Nuar u-boot-2010.09/include/image.h u-boot-2010.09-sam9260/include/image.h
--- u-boot-2010.09/include/image.h	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/include/image.h	2011-04-13 17:25:46.000000000 +0800
@@ -166,7 +166,7 @@
 #define IH_COMP_LZMA		3	/* lzma  Compression Used	*/
 #define IH_COMP_LZO		4	/* lzo   Compression Used	*/
 
-#define IH_MAGIC	0x27051956	/* Image Magic Number		*/
+#define IH_MAGIC	0x534C4847	/* Image Magic Number,SLHG, modify by guowenxue	*/
 #define IH_NMLEN		32	/* Image Name Length		*/
 
 /*
diff -Nuar u-boot-2010.09/Makefile u-boot-2010.09-sam9260/Makefile
--- u-boot-2010.09/Makefile	2010-09-29 05:20:55.000000000 +0800
+++ u-boot-2010.09-sam9260/Makefile	2011-04-13 16:53:41.000000000 +0800
@@ -154,6 +154,7 @@
 # load ARCH, BOARD, and CPU configuration
 include $(obj)include/config.mk
 export	ARCH CPU BOARD VENDOR SOC
+CROSS_COMPILE = /opt/buildroot-2011.02/arm926t/usr/bin/arm-linux-
 
 # set default to nothing for native builds
 ifeq ($(HOSTARCH),$(ARCH))
